<!DOCTYPE html>
<html lang="en">
    <head>
        <<meta charset="utf-8" />
        <meta name="viewpoint" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="node_modules/font-awesome/css/font-awesome.min.css" />
        <link rel="stylesheet" href="node_modules/bootstrap-social/bootstrap-social.css" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster|Open+Sans" />
        <title>Matching Game</title>
         <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="matching-game.css">
    </head>
    <header class="jumbo">
        <div class="container">
            <div class="row">
                <div class="col">
                    <h1>
                        Matching Game
                    </h1>
                    <h2>
                        A lovely game to try
                    </h2>
                </div>
            </div>
        </div>
        <div class="container button">
            <div class="row row content">
                <div class="col-sm-4">
                    <button type="button" class="btn btn-primary" onclick="startGame()">Reset</button>
                </div>
                <div class="col-sm-4">
                    <button type="button" class="btn btn-danger" id="diff" onclick="selectDifficulty()">Select Difficulty</button>
                </div>
                <div class="col-sm-4">
                    <button class="btn btn-info" type="button" data-toggle="modal" data-target="#instruction">Instructions</button>
                </div>
            </div>
        </div>
        
        <div id="instruction" class="modal fade" role="dialog">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header bg-info text-white">
                        <h3 class="modal-title">Instructions</h3>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="container-fluid">
                            <ul id="instruction" class="list-unstyled">
                                <li>Click on "Reset" to begin.</li>
                                <li>Click on "Difficulty" and type how many face increment you want.</li>
                                <li>Locate and click on the extra smiley on the left box.</li>
                                <li>Continue and see how many Levels you can get too.</li>
                                <li>After the preminary level you have 10seconds to complete each level.</li>
                                <li>Enjoy!</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
    </header>
    <body>


       

        <section id="gameData">
        <div class="faces" id="leftSide"></div>
        <div class="faces" id="rightSide"></div>
        </section>
       
        <script>
            window.addEventListener('load', generateFaces);
            let timer = 0;
            let numberOfFaces = 5;
            const theLeftSide = document.getElementById('leftSide');
            const theRightSide = document.getElementById('rightSide');
            let counter = 1;

            function generateFaces() {
                 for (let i=0; i < numberOfFaces; i++) {
            
                 
                 const yFace = document.createElement('img');
                
                 yFace.src='img/horse.svg'; 
                 
                 yFace.alt='yFace Image'
                 let randomTop = Math.floor(Math.random() * 401);
                 let randomLeft = Math.floor(Math.random() * 401);

                
                 yFace.style.top = randomTop + 'px';
                
                 yFace.style.left = randomLeft + 'px';
                
                 
                 theLeftSide.appendChild(yFace);
    
                
                 
                    
                 
                }
            
                 const leftSideImages = theLeftSide.cloneNode(true);
                 leftSideImages.removeChild(leftSideImages.lastChild);
                 theRightSide.appendChild(leftSideImages);
                 theLeftSide.lastChild.addEventListener('click', nextLevel);
                 theLeftSide.addEventListener('click', gameOver);   
            }
            
                

            function gameOver() {
                let completedLevel = (counter - 1)
              alert('Game Over! You completed ' + completedLevel + ' level(s)' );
                 theLeftSide.lastChild.removeEventListener('click', nextLevel);
                  document.getElementById('gameData').removeEventListener('click', gameOver);
                  location.reload();

            }
            function nextLevel() {
                alert('Level ' + counter);
                event.stopPropagation();
                numberOfFaces += incremental;
                counter += 1

                while (theLeftSide.firstChild) {
                    theLeftSide.removeChild(theLeftSide.firstChild);
                
                }
                while (theRightSide.firstChild) {
                    theRightSide.removeChild(theRightSide.firstChild);
                } 
                generateFaces();
                clearTimeout(timer);
                timer = setTimeout(gameOver, 10000);
                
                
            }

            function startGame() {
                location.reload();
            }
        
        let incremental = 2;
            function selectDifficulty() {
               incrementalString = prompt('How many incremental smiling face can you handle?\n\nThe higher the number the higher the difficulty');
               incremental = +incrementalString;
            }
            
        </script>
        <script src="node_modules/jquery/dist/jquery.slim.min.js"></script>
        <script src="node_modules/popper.js/dist/umd/popper.min.js"></script>
        <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    </body>
</html>